package com.dincher.project.scm.controller;


import com.dincher.framework.web.controller.BaseController;
import com.dincher.framework.web.domain.RequestQueryBody;
import com.dincher.framework.web.domain.ResponseEntity;
import com.dincher.framework.web.page.TableDataInfo;
import com.dincher.framework.web.util.ResponseUtil;
import com.dincher.project.scm.domain.DTO.AppVersionsDTO;
import com.dincher.project.scm.domain.vo.AppVersionsVO;
import com.dincher.project.scm.service.AppVersionsService;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import org.springframework.web.bind.annotation.*;

import javax.annotation.Resource;
import java.util.List;

/**
 * app版本号管理(its_app_versions)控制层
 *
 * @author yc
 * @date 2023-12-21 13:32:31
 */
@RestController
@RequestMapping("/appVersions")
@Api(tags = "app版本号管理(its_app_versions)APi")
public class AppVersionsController extends BaseController {

    @Resource
    private AppVersionsService appVersionsService;

    /**
     * @author yc
     * @date 2023-12-21 13:32:31
     */
    @PostMapping(value = "/page")
    @ApiOperation(value = "分页查询")
    public TableDataInfo<AppVersionsVO> page(@RequestBody RequestQueryBody<AppVersionsDTO> requestQueryBody) {
        startPage(requestQueryBody);
        List<AppVersionsVO> AppVersionsVOList = appVersionsService.pageByDTO(requestQueryBody.getParam());
        return getDataTable(AppVersionsVOList);
    }

    /**
     * @author yc
     * @date 2023-12-21 13:32:31
     */
    @PostMapping(value = "/list")
    @ApiOperation(value = "列表查询（非分页）")
    public ResponseEntity<List<AppVersionsVO>> list(@RequestBody AppVersionsVO appVersionsVO) {
        return ResponseUtil.success(appVersionsService.selectDataList(appVersionsVO));
    }

    /**
     * @author yc
     * @date 2023-12-21 13:32:31
     */
    @GetMapping("{id}")
    @ApiOperation(value = "通过主键查询单条数据")
    public ResponseEntity<AppVersionsVO> selectOne(@PathVariable Integer id) {
        return ResponseUtil.success(appVersionsService.getByIdVO(id));
    }

    @GetMapping("/checkVersions/{versionsNo}")
    @ApiOperation(value = "校验版本号")
    public ResponseEntity<AppVersionsVO> checkVersions(@PathVariable String versionsNo) {
        return ResponseUtil.success(appVersionsService.checkVersions(versionsNo));
    }

    @GetMapping("/getLastVersions")
    @ApiOperation(value = "获取最新得版本号信息")
    public ResponseEntity<AppVersionsVO> getLastVersions() {
        return ResponseUtil.success(appVersionsService.getLastVersions());
    }


    /**
     * @author yc
     * @date 2023-12-21 13:32:31
     */
    @PostMapping(value = "/save")
    @ApiOperation(value = "新增数据")
    public ResponseEntity insert(@RequestBody AppVersionsVO appVersionsVO) {
        return ResponseUtil.success(appVersionsService.saveVO(appVersionsVO));
    }

    /**
     * @author yc
     * @date 2023-12-21 13:32:31
     */
    @PutMapping(value = "/update")
    @ApiOperation(value = "修改数据")
    public ResponseEntity update(@RequestBody AppVersionsVO appVersionsVO) {
        return ResponseUtil.success(appVersionsService.updateById(appVersionsVO));
    }

    /**
     * @author yc
     * @date 2023-12-21 13:32:31
     */
    @DeleteMapping(value = "/delete")
    @ApiOperation(value = "删除数据")
    public ResponseEntity delete(@RequestBody List<Integer> ids) {
        return ResponseUtil.success(appVersionsService.removeByIds(ids));
    }
}

